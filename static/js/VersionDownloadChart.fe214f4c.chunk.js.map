{"version":3,"file":"static/js/VersionDownloadChart.fe214f4c.chunk.js","mappings":"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","sources":["chartColor.ts","styles/VersionDownloadChart.styles.ts","webpack://rn-version-tracker/./src/styles/VersionTooltip.module.scss?511e","components/VersionTooltip.tsx","webpack://rn-version-tracker/./src/styles/VersionLegend.module.scss?6397","components/VersionLegend.tsx","components/VersionDownloadChart.tsx"],"sourcesContent":["import randomSeed from \"random-seed\";\n\nexport type AvoidToken = {\n  adjacentHue: number;\n  allHues: number[];\n};\n\nconst styles = {\n  againstDark: {\n    minLuminance: 0.3,\n  },\n  againstLight: {\n    maxLuminance: 0.3,\n  },\n  dark: {\n    saturation: 0.5,\n    defaultLightness: 0.5,\n  },\n  light: {\n    saturation: 0.7,\n    defaultLightness: 0.6,\n  },\n};\n\n/**\n * Generates a hue with random distribution, stable for a given semver\n * version. Allows passing an `avoidToken` generated by a previous color, to avoid a color similar\n * to it.\n *\n * * Derived from:\n * - http://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/\n * - https://github.com/devongovett/color-generator\n */\nexport default function generateHue(\n  version: string,\n  avoidToken?: AvoidToken\n): { hue: number; avoidToken: AvoidToken } {\n  const adjacentHueThreshold = 0.4;\n  const allHueThreshold = 0.06;\n\n  const goldenRatio = 0.618033988749895;\n\n  const randomGenerator = randomSeed.create(version);\n  let hue: number;\n  let triesRemaining = 100;\n\n  do {\n    hue = randomGenerator.random();\n    hue += goldenRatio;\n    hue %= 1;\n  } while (\n    avoidToken &&\n    --triesRemaining > 0 &&\n    (hueDifference(hue, avoidToken.adjacentHue) < adjacentHueThreshold ||\n      avoidToken.allHues.find(\n        // eslint-disable-next-line no-loop-func\n        (otherHue) => hueDifference(hue, otherHue) < allHueThreshold\n      ))\n  );\n\n  return {\n    hue: hue * 360,\n    avoidToken: {\n      adjacentHue: hue,\n      allHues: [...(avoidToken?.allHues ?? []), hue],\n    },\n  };\n}\n\nconst colorCache: Partial<\n  Record<\n    number,\n    Array<{\n      variant?: \"light\" | \"dark\";\n      targetLuminance?: \"contrasts-light\" | \"contrasts-dark\";\n      result: string;\n    }>\n  >\n> = {};\n\n/**\n * Calculates a color with the given hue, optionally specified to meet a\n * specific contrast requirement\n */\nexport function colorForHue(\n  hue: number,\n  opts?: {\n    variant?: \"light\" | \"dark\";\n    targetLuminance?: \"contrasts-light\" | \"contrasts-dark\";\n  }\n) {\n  const cacheEntry = colorCache[hue] ?? [];\n  for (const record of cacheEntry) {\n    if (\n      record.targetLuminance === opts?.targetLuminance &&\n      record.variant === opts?.variant\n    ) {\n      return record.result;\n    }\n  }\n\n  const saturation =\n    opts?.variant === \"dark\" ? styles.dark.saturation : styles.light.saturation;\n\n  const defaultLightness =\n    opts?.variant === \"dark\"\n      ? styles.dark.defaultLightness\n      : styles.light.defaultLightness;\n\n  const lightness = adjustLightnessForContrast(\n    defaultLightness,\n    hue,\n    saturation,\n    opts?.targetLuminance\n  );\n\n  const result = `hsl(${hue}, ${saturation * 100}%, ${lightness * 100}%)`;\n  cacheEntry.push({\n    variant: opts?.variant,\n    targetLuminance: opts?.targetLuminance,\n    result,\n  });\n  return result;\n}\n\nfunction hueDifference(hue1: number, hue2: number) {\n  return Math.abs(((hue1 - hue2 + 0.5) % 1.0) - 0.5);\n}\n\nfunction adjustLightnessForContrast(\n  lightness: number,\n  h: number,\n  s: number,\n  contrastingColor?: \"contrasts-light\" | \"contrasts-dark\"\n) {\n  if (contrastingColor === \"contrasts-light\") {\n    while (\n      relativeLuminance(h, s, lightness) > styles.againstLight.maxLuminance\n    ) {\n      lightness -= 0.02;\n    }\n  } else if (contrastingColor === \"contrasts-dark\") {\n    while (\n      relativeLuminance(h, s, lightness) < styles.againstDark.minLuminance\n    ) {\n      lightness += 0.02;\n    }\n  }\n\n  return lightness;\n}\n\n/**\n * Calculate the relative luminance which is how bright the color is from the perspective of\n * a human eye.  Blue is much darker than green for instance so (0, 0, 255) is perceived to be\n * significantly darker than (0, 255, 0).  This is used to calculate contrast ratios between\n * two colors to ensure text is readable.\n */\nexport function relativeLuminance(h: number, s: number, l: number): number {\n  const { r, g, b } = hsl2rgb(h, s, l);\n\n  // Formula defined by: http://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html#contrast-ratiodef\n  // relative luminance: http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n\n  // get the effective radius for each color\n  const r1 = standardToLinear(r / 255);\n  const g1 = standardToLinear(g / 255);\n  const b1 = standardToLinear(b / 255);\n\n  // relative luminance adjusts the R/G/B values by modifiers for their perceived brightness\n  // to produce lightness result for how the eye perceives the color\n  return 0.2126 * r1 + 0.7152 * g1 + 0.0722 * b1;\n}\n\n/**\n * Converts an r, g, or b value in the sRGB color space to the corresponding value in linearRGB\n * This is necessary for relative luminance calculations\n * Formula defined at https://en.wikipedia.org/wiki/SRGB\n *\n * @param c - one of r g or b coming from sRGB\n */\nfunction standardToLinear(c: number): number {\n  return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n}\n\nfunction hsl2rgb(\n  h: number,\n  s: number,\n  l: number\n): { r: number; g: number; b: number } {\n  const c: number = (1 - Math.abs(2 * l - 1)) * s;\n  const x: number = c * (1 - Math.abs(((h / 60) % 2) - 1));\n  const m: number = l - c / 2;\n\n  let r1: number = 0;\n  let g1: number = 0;\n  let b1: number = 0;\n\n  // different values of h\n  if (h < 60) {\n    r1 = c;\n    g1 = x;\n    b1 = 0;\n  } else if (h < 120) {\n    r1 = x;\n    g1 = c;\n    b1 = 0;\n  } else if (h < 180) {\n    r1 = 0;\n    g1 = c;\n    b1 = x;\n  } else if (h < 240) {\n    r1 = 0;\n    g1 = x;\n    b1 = c;\n  } else if (h < 300) {\n    r1 = x;\n    g1 = 0;\n    b1 = c;\n  } else {\n    r1 = c;\n    g1 = 0;\n    b1 = x;\n  }\n\n  return {\n    r: Math.round(255 * (r1 + m)),\n    g: Math.round(255 * (g1 + m)),\n    b: Math.round(255 * (b1 + m)),\n  };\n}\n","import { ITheme } from \"@fluentui/react\";\n\nimport type {\n  AreaProps,\n  CartesianGridProps,\n  ResponsiveContainerProps,\n  TooltipProps,\n  XAxisProps,\n  YAxisProps,\n} from \"recharts\";\nimport { Unit } from \"../components/VersionDownloadChart\";\n\ntype AnimationProps =\n  | \"animationDuration\"\n  | \"animationEasing\"\n  | \"isAnimationActive\";\ntype DimensionProps = \"width\" | \"height\";\ntype PaddingProps = \"padding\";\ntype StrokeProps = \"stroke\" | \"strokeDasharray\" | \"strokeOpacity\";\ntype TickProps =\n  | \"tick\"\n  | \"tickCount\"\n  | \"tickLine\"\n  | \"tickSize\"\n  | \"tickMargin\"\n  | \"minTickGap\";\n\nexport type VersionDownloadChartStyle = (opts?: {\n  theme?: ITheme;\n  unit?: Unit;\n}) => {\n  areaChart: {\n    margin?: { top?: number; right?: number; bottom?: number; left?: number };\n  };\n  area: Pick<AreaProps, AnimationProps | DimensionProps>;\n  responsiveContainer: Pick<ResponsiveContainerProps, DimensionProps>;\n  grid: Pick<CartesianGridProps, DimensionProps | StrokeProps>;\n  xAxis: Pick<XAxisProps, DimensionProps | PaddingProps | TickProps>;\n  yAxis: Pick<YAxisProps, DimensionProps | PaddingProps | TickProps>;\n  tooltip: Pick<TooltipProps<string, number>, AnimationProps | \"offset\">;\n};\n\nconst styles: VersionDownloadChartStyle = ({ theme, unit } = {}) => ({\n  areaChart: {\n    margin: { top: 15, right: 28, bottom: 5 },\n  },\n  area: {\n    isAnimationActive: false,\n    stroke: theme?.isInverted\n      ? theme.palette.whiteTranslucent40\n      : theme?.palette.blackTranslucent40,\n  },\n  responsiveContainer: {\n    width: \"100%\",\n    height: 228,\n  },\n  grid: {\n    stroke: theme?.isInverted\n      ? theme.palette.whiteTranslucent40\n      : theme?.palette.blackTranslucent40,\n    strokeDasharray: \"1 1\",\n  },\n  xAxis: {\n    tickLine: false,\n    tickSize: 4,\n    tickMargin: 10,\n    tick: { fill: theme?.semanticColors.bodyText },\n  },\n  yAxis: {\n    tickLine: false,\n    tickMargin: 10,\n    tickSize: 0,\n    tickCount: 5,\n    width: 52,\n    tick: { fill: theme?.semanticColors.bodyText },\n  },\n  tooltip: {\n    animationDuration: 150,\n    animationEasing: \"linear\",\n    offset: 24,\n  },\n});\n\nexport default styles;\n","// extracted by mini-css-extract-plugin\nexport default {\"frame\":\"VersionTooltip_frame__mZVBJ\",\"date\":\"VersionTooltip_date__ejKCx\",\"versionsList\":\"VersionTooltip_versionsList__tB7yN\",\"versionsListItem\":\"VersionTooltip_versionsListItem__HAZpv\",\"versionLabel\":\"VersionTooltip_versionLabel__eA66Q\",\"versionCount\":\"VersionTooltip_versionCount__0B822\"};","import styles from \"../styles/VersionTooltip.module.scss\";\nimport { ITheme, Text, ThemeContext, ThemeProvider } from \"@fluentui/react\";\n\nimport { TooltipProps } from \"recharts\";\nimport { Unit } from \"./VersionDownloadChart\";\nimport type { Payload } from \"recharts/types/component/DefaultTooltipContent\";\nimport { colorForHue } from \"../chartColor\";\n\ntype DateTooltipProps = TooltipProps<number, number>;\n\nfunction formatCount(\n  count: number,\n  entry: Payload<number, number>,\n  measurementTransform: Unit | undefined\n): string {\n  const { versionCounts } = entry.payload as {\n    versionCounts: Record<string, number>;\n  };\n\n  const totalCount = Object.values(versionCounts).reduce((a, b) => a + b, 0);\n\n  const pct = ((count as number) / totalCount) * 100;\n\n  if (measurementTransform === \"percentage\") {\n    return `${Math.round(pct * 100) / 100}%`;\n  } else {\n    return `${count.toLocaleString()} (${Math.round(pct)}%)`;\n  }\n}\n\nfunction formatLabel(unixTime: number): string {\n  return new Date(unixTime).toLocaleDateString(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n  });\n}\n\nexport function createTooltipContent(\n  props: VersionProps\n): React.FC<DateTooltipProps> {\n  return (tooltipProps) => (\n    <VersionTooltipContent {...props} {...tooltipProps} />\n  );\n}\n\nexport type VersionProps = {\n  versionHues: Record<string, number>;\n  unit?: Unit;\n  theme?: ITheme;\n};\n\nexport const VersionTooltipContent: React.FC<\n  VersionProps & DateTooltipProps\n> = ({ label, payload, unit, versionHues, theme }) => {\n  const reversedItems = [...(payload ?? [])];\n  reversedItems.reverse();\n\n  return (\n    <ThemeContext.Consumer>\n      {(contextTheme) => {\n        theme = theme ?? contextTheme;\n\n        const versionsList = reversedItems.length > 0 && (\n          <ul className={styles.versionsList}>\n            {reversedItems.map((entry, i) => {\n              const colorChipColor = theme\n                ? colorForHue(\n                    versionHues[entry.name!],\n                    theme.isInverted\n                      ? { variant: \"dark\", targetLuminance: \"contrasts-dark\" }\n                      : { variant: \"light\", targetLuminance: \"contrasts-light\" }\n                  )\n                : entry.color;\n\n              const formattedValue = formatCount(entry.value!, entry, unit);\n\n              return (\n                <li key={i} className={styles.versionsListItem}>\n                  <Text\n                    variant=\"small\"\n                    className={styles.versionLabel}\n                    style={{ color: colorChipColor }}\n                  >\n                    {entry.name}\n                  </Text>\n                  <Text variant=\"small\" className={styles.versionCount}>\n                    {formattedValue}\n                  </Text>\n                </li>\n              );\n            })}\n            <li key=\"sum\" className={styles.versionsListItem}>\n              <Text variant=\"small\" className={styles.versionLabel}>\n                Total\n              </Text>\n              <Text variant=\"small\" className={styles.versionCount}>\n                {reversedItems\n                  .reduce((prev, curr) => prev + (curr.value || 0), 0)\n                  .toLocaleString()}\n              </Text>\n            </li>\n          </ul>\n        );\n\n        return (\n          <ThemeProvider\n            theme={theme}\n            className={styles.frame}\n            style={{\n              backgroundColor: (theme ?? contextTheme)?.semanticColors\n                .bodyBackground,\n            }}\n          >\n            <Text className={styles.date} variant=\"medium\">\n              {formatLabel(label!)}\n            </Text>\n            {versionsList}\n          </ThemeProvider>\n        );\n      }}\n    </ThemeContext.Consumer>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"versionsListContainer\":\"VersionLegend_versionsListContainer__vCxx0\",\"versionsList\":\"VersionLegend_versionsList__tRQMP\",\"versionsListItem\":\"VersionLegend_versionsListItem__f1GBC\",\"versionColorIndicator\":\"VersionLegend_versionColorIndicator__BpNMr\",\"versionLabel\":\"VersionLegend_versionLabel__FNwLX\"};","import type { Payload } from \"recharts/types/component/DefaultLegendContent\";\nimport styles from \"../styles/VersionLegend.module.scss\";\n\nimport { Text, ThemeContext } from \"@fluentui/react\";\nimport { colorForHue } from \"../chartColor\";\n\ntype VersionLegendProps = {\n  payload: Payload[];\n  versionHues: Record<string, number>;\n  hiddenSeries: string[];\n  setHiddenSeries: React.Dispatch<React.SetStateAction<string[]>>;\n};\n\nconst VersionLegend: React.FC<VersionLegendProps> = ({\n  payload,\n  versionHues,\n  hiddenSeries,\n  setHiddenSeries,\n}) => {\n  return (\n    <ThemeContext.Consumer>\n      {(theme) => (\n        <div className={styles.versionsListContainer}>\n          <ul className={styles.versionsList}>\n            {payload.map(({ value, color }) => {\n              const isHidden = hiddenSeries.includes(value);\n              const colorChipColor = isHidden\n                ? theme?.semanticColors.buttonBackgroundDisabled\n                : theme\n                ? colorForHue(\n                    versionHues[value!],\n                    theme.isInverted\n                      ? { variant: \"dark\", targetLuminance: \"contrasts-dark\" }\n                      : {\n                          variant: \"light\",\n                          targetLuminance: \"contrasts-light\",\n                        }\n                  )\n                : color!;\n\n              return (\n                <li\n                  key={value}\n                  className={styles.versionsListItem}\n                  onClick={() =>\n                    setHiddenSeries(() =>\n                      isHidden\n                        ? hiddenSeries.filter((key: string) => key !== value)\n                        : hiddenSeries.concat(value)\n                    )\n                  }\n                >\n                  <div\n                    className={styles.versionColorIndicator}\n                    style={{ backgroundColor: colorChipColor }}\n                  />\n                  <Text\n                    variant=\"small\"\n                    className={styles.versionLabel}\n                    style={\n                      isHidden\n                        ? { color: theme?.semanticColors.buttonTextDisabled }\n                        : {}\n                    }\n                  >\n                    {value}\n                  </Text>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n    </ThemeContext.Consumer>\n  );\n};\n\nexport default VersionLegend;\n","import React, { useState } from \"react\";\n\nimport generateHue, { AvoidToken, colorForHue } from \"../chartColor\";\nimport styleProps from \"../styles/VersionDownloadChart.styles\";\nimport { createTooltipContent } from \"./VersionTooltip\";\n\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n} from \"recharts\";\nimport type { HistoryPointCollection, HistoryPoint } from \"../HistoryReader\";\nimport { ITheme } from \"@fluentui/react\";\n\nimport { createPortal } from \"react-dom\";\nimport VersionLegend from \"./VersionLegend\";\n\nexport type Unit = \"totalDownloads\" | \"percentage\";\n\nexport type VersionLabeler = (version: string) => string;\n\nexport type VersionDownloadChartProps = {\n  /**\n   * Class wrapping the chart\n   */\n  className?: string;\n\n  /**\n   * Points to render\n   */\n  history?: HistoryPointCollection;\n\n  /**\n   * Maximum duration the graph will show, in days\n   */\n  maxDaysShown?: number;\n\n  /**\n   * Maximum total ticks to show for dates/times\n   */\n  maxTicks?: number;\n\n  /**\n   * The maximum number of \"popular\" versions show (see below).\n   */\n  maxVersionsShown?: number;\n\n  /**\n   * Controls how \"popular\" versions are selected\n   *\n   * \"all\" (Default): Examine and rank all versions that exist in the time-span\n   * shown, ranking by sum of downloads/week measurements\n   *\n   * \"most-recent\": Select versions from the most recent polling-time, ranking\n   * by downloads/week\n   */\n  popularDuring?: \"all\" | \"most-recent\";\n\n  /**\n   * Whether to show the legend (defaults to true)\n   */\n  showLegend?: boolean;\n\n  /**\n   * Whether to show the tooltip (defaults to true)\n   */\n  showTooltip?: boolean;\n\n  /**\n   * The unit to show in the Y axis\n   */\n  unit?: Unit;\n\n  /**\n   * Allows relabeling versions\n   */\n  versionLabeler?: VersionLabeler;\n\n  /**\n   * Theme, used to ensure we have enough contrast.\n   */\n  theme?: ITheme;\n\n  /**\n   * Override the default provided theme for the tooltip\n   */\n  tooltipTheme?: ITheme;\n};\n\nconst VersionDownloadChart: React.FC<VersionDownloadChartProps> = ({\n  className,\n  history,\n  maxDaysShown,\n  maxVersionsShown,\n  popularDuring,\n  maxTicks,\n  showLegend,\n  showTooltip,\n  unit,\n  versionLabeler,\n  theme,\n  tooltipTheme,\n}) => {\n  const styles = styleProps({ theme, unit });\n\n  const [legendElement, setLegendElement] = useState<HTMLDivElement>();\n  const [hiddenSeries, setHiddenSeries] = useState<string[]>([]);\n\n  const filteredHistory = React.useMemo(\n    () =>\n      filterTopN(\n        history,\n        maxVersionsShown ?? 5,\n        maxDaysShown ?? 30,\n        popularDuring\n      ),\n    [history, maxDaysShown, maxVersionsShown, popularDuring]\n  );\n\n  const dateTicks = React.useMemo(\n    () =>\n      !filteredHistory\n        ? []\n        : calculateDateTicks(\n            filteredHistory.points.map((p) => p.date),\n            maxTicks ?? 6\n          ),\n    [filteredHistory, maxTicks]\n  );\n\n  const versionHues = React.useMemo(() => {\n    if (!filteredHistory) {\n      return {};\n    }\n\n    const hues: Record<string, number> = {};\n    let lastAvoidToken: AvoidToken | undefined;\n\n    filteredHistory.versions.forEach((v) => {\n      const { hue, avoidToken } = generateHue(v, lastAvoidToken);\n      lastAvoidToken = avoidToken;\n      hues[versionLabeler ? versionLabeler(v) : v] = hue;\n    });\n\n    return hues;\n  }, [filteredHistory, versionLabeler]);\n\n  const chartAreas = React.useMemo(\n    () =>\n      !filteredHistory\n        ? []\n        : filteredHistory.versions\n            .map((v) => {\n              const name = versionLabeler ? versionLabeler(v) : v;\n              const hue = versionHues[name];\n              const colorVariant = theme?.isInverted ? \"dark\" : \"light\";\n              const fill = colorForHue(hue, {\n                variant: colorVariant,\n                targetLuminance: theme?.isInverted\n                  ? \"contrasts-light\"\n                  : \"contrasts-dark\",\n              });\n              return { name, hue, fill, dataKey: v };\n            })\n            .reverse(),\n    [filteredHistory, theme?.isInverted, versionHues, versionLabeler]\n  );\n\n  return (\n    <div className={className}>\n      <ResponsiveContainer {...styles.responsiveContainer}>\n        <AreaChart\n          {...styles.areaChart}\n          data={filteredHistory?.points}\n          reverseStackOrder\n          stackOffset={unit === \"percentage\" ? \"expand\" : \"none\"}\n        >\n          <XAxis\n            {...styles.xAxis}\n            dataKey=\"date\"\n            type=\"number\"\n            scale=\"time\"\n            domain={[\"dataMin\", \"dataMax\"]}\n            tickFormatter={(unixTime) =>\n              new Date(unixTime).toLocaleDateString(\"en-US\", {\n                month: \"short\",\n                day: \"numeric\",\n              })\n            }\n            interval={0}\n            ticks={dateTicks}\n          />\n          <YAxis\n            {...styles.yAxis}\n            type=\"number\"\n            {...(unit === \"percentage\"\n              ? {\n                  domain: [0, 1],\n                  tickFormatter: (count) => `${Math.round(count * 100)}%`,\n                }\n              : {\n                  domain: [\"auto\", \"auto\"],\n                  tickFormatter: formatDownloadCountTicks,\n                })}\n          />\n\n          {showTooltip !== false && (\n            <Tooltip\n              {...styles.tooltip}\n              content={createTooltipContent({\n                versionHues,\n                unit,\n                theme: tooltipTheme,\n              })}\n            />\n          )}\n          {showLegend !== false && legendElement && (\n            <Legend\n              height={0}\n              content={({ payload }) =>\n                createPortal(\n                  payload && (\n                    <VersionLegend\n                      payload={payload}\n                      versionHues={versionHues}\n                      hiddenSeries={hiddenSeries}\n                      setHiddenSeries={setHiddenSeries}\n                    />\n                  ),\n                  legendElement\n                )\n              }\n            />\n          )}\n\n          {chartAreas.map(({ name, fill, dataKey }) => (\n            <Area\n              {...styles.area}\n              name={name}\n              key={name}\n              dataKey={(datapoint) =>\n                hiddenSeries.includes(\n                  versionLabeler ? versionLabeler(dataKey) : dataKey\n                )\n                  ? undefined\n                  : datapoint.versionCounts[dataKey]\n              }\n              stackId=\"1\"\n              fill={fill}\n              fillOpacity={1}\n            />\n          ))}\n\n          <CartesianGrid {...styles.grid} />\n        </AreaChart>\n      </ResponsiveContainer>\n      <div ref={(el) => setLegendElement(el ?? undefined)} />\n    </div>\n  );\n};\n\nfunction formatDownloadCountTicks(count: number) {\n  if (!count) {\n    return \"\";\n  } else if (count >= 1000000) {\n    return `${(count / 1000000).toLocaleString()} m`;\n  } else if (count >= 1000) {\n    return `${(count / 1000).toLocaleString()} k`;\n  } else {\n    return count.toLocaleString();\n  }\n}\n\nfunction calculateDateTicks(dates: number[], maxTicks: number): number[] {\n  if (maxTicks === 0) {\n    return [];\n  }\n\n  const first = dates[0];\n  const last = dates[dates.length - 1];\n\n  if (maxTicks === 1) {\n    return [first];\n  }\n\n  if (maxTicks === 2) {\n    return [first, last];\n  }\n\n  const dataDuration = last - first;\n  const dayDuration = 24 * 60 * 60 * 1000;\n  const weekDuration = 7 * dayDuration;\n\n  const maxInteriorTicks = maxTicks - 1;\n  let tickInterval = weekDuration;\n  while (Math.floor(dataDuration / tickInterval) > maxInteriorTicks) {\n    tickInterval *= 2;\n  }\n\n  const ticks = new Set([first]);\n  let nextTick = fromDayStart(first, tickInterval);\n\n  for (const date of dates) {\n    if (date >= nextTick) {\n      ticks.add(date);\n      nextTick = fromDayStart(date, tickInterval);\n    }\n  }\n\n  return [...ticks];\n}\n\nfunction fromDayStart(date: number, duration: number): number {\n  const dayStart = new Date(date);\n  dayStart.setHours(0, 0, 0, 0);\n\n  return dayStart.getTime() + duration;\n}\n\nfunction filterTopN(\n  history: HistoryPointCollection | undefined,\n  n: number,\n  windowInDays: number,\n  popularDuring?: \"all\" | \"most-recent\"\n): HistoryPointCollection | undefined {\n  if (!history || history.points.length === 0) {\n    return history;\n  }\n\n  const latestDate = history.points[history.points.length - 1].date;\n  const latestDay = new Date(latestDate).setHours(0, 0, 0, 0);\n  const earliestAllowableDate = latestDay - windowInDays * 24 * 60 * 60 * 1000;\n\n  const popularVersions =\n    popularDuring === \"most-recent\"\n      ? versionsInWindow(history, latestDate)\n      : versionsInWindow(history, earliestAllowableDate);\n\n  const topVersions = new Set(\n    Object.entries(popularVersions)\n      .sort((a, b) => a[1]! - b[1]!)\n      .slice(-n)\n      .map(([version, _count]) => version)\n  );\n\n  const filteredPoints: HistoryPoint[] = [];\n\n  for (const point of history.points) {\n    if (point.date >= earliestAllowableDate) {\n      const topVersionsOnDate = Object.keys(point.versionCounts).filter((v) =>\n        topVersions.has(v)\n      );\n\n      if (topVersionsOnDate.length > 0) {\n        const filteredPoint: HistoryPoint = {\n          date: point.date,\n          versionCounts: {},\n        };\n\n        for (const topVersion of topVersionsOnDate) {\n          filteredPoint.versionCounts[topVersion] =\n            point.versionCounts[topVersion];\n        }\n\n        filteredPoints.push(filteredPoint);\n      }\n    }\n  }\n\n  return {\n    versions: history.versions.filter((v) => topVersions.has(v)),\n    points: filteredPoints,\n  };\n}\n\nfunction versionsInWindow(\n  history: HistoryPointCollection,\n  earliestAllowableDate: number\n): { [version: string]: number | undefined } {\n  const versions: { [version: string]: number | undefined } = {};\n\n  for (const point of history.points) {\n    if (point.date >= earliestAllowableDate) {\n      for (const [version, count] of Object.entries(point.versionCounts)) {\n        const existingCount = versions[version] ?? 0;\n        versions[version] = existingCount + count!;\n      }\n    }\n  }\n\n  return versions;\n}\n\nexport default VersionDownloadChart;\n"],"names":["styles","minLuminance","maxLuminance","saturation","defaultLightness","colorCache","colorForHue","hue","opts","cacheEntry","record","targetLuminance","variant","result","lightness","h","s","contrastingColor","relativeLuminance","adjustLightnessForContrast","push","hueDifference","hue1","hue2","Math","abs","l","r","g","b","c","x","m","r1","g1","b1","round","hsl2rgb","standardToLinear","pow","theme","unit","areaChart","margin","top","right","bottom","area","isAnimationActive","stroke","isInverted","palette","whiteTranslucent40","blackTranslucent40","responsiveContainer","width","height","grid","strokeDasharray","xAxis","tickLine","tickSize","tickMargin","tick","fill","semanticColors","bodyText","yAxis","tickCount","tooltip","animationDuration","animationEasing","offset","VersionTooltipContent","label","payload","versionHues","reversedItems","reverse","ThemeContext","contextTheme","versionsList","length","className","map","entry","i","colorChipColor","name","color","formattedValue","count","measurementTransform","versionCounts","pct","Object","values","reduce","a","toLocaleString","formatCount","value","Text","style","prev","curr","ThemeProvider","backgroundColor","bodyBackground","unixTime","Date","toLocaleDateString","month","day","hiddenSeries","setHiddenSeries","isHidden","includes","buttonBackgroundDisabled","onClick","filter","key","concat","buttonTextDisabled","formatDownloadCountTicks","fromDayStart","date","duration","dayStart","setHours","getTime","versionsInWindow","history","earliestAllowableDate","versions","point","points","version","entries","existingCount","maxDaysShown","maxVersionsShown","popularDuring","maxTicks","showLegend","showTooltip","versionLabeler","tooltipTheme","styleProps","legendElement","setLegendElement","useState","filteredHistory","React","n","windowInDays","latestDate","popularVersions","topVersions","Set","sort","slice","_count","filteredPoints","topVersionsOnDate","keys","v","has","filteredPoint","topVersion","filterTopN","dateTicks","dates","first","last","dataDuration","maxInteriorTicks","tickInterval","floor","ticks","nextTick","add","calculateDateTicks","p","hues","lastAvoidToken","forEach","avoidToken","randomGenerator","randomSeed","triesRemaining","random","adjacentHue","allHues","find","otherHue","generateHue","chartAreas","dataKey","ResponsiveContainer","AreaChart","data","reverseStackOrder","stackOffset","XAxis","type","scale","domain","tickFormatter","interval","YAxis","Tooltip","content","props","tooltipProps","Legend","createPortal","Area","datapoint","undefined","stackId","fillOpacity","CartesianGrid","ref","el"],"sourceRoot":""}