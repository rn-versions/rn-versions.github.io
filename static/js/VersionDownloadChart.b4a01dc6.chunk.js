"use strict";(globalThis.webpackChunkrn_version_tracker=globalThis.webpackChunkrn_version_tracker||[]).push([[295],{7119:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(2791),o=n(5869),i=n.n(o);const r={minLuminance:.3},s={maxLuminance:.3},l={saturation:.5,defaultLightness:.5},c={saturation:.7,defaultLightness:.6};const u={};function d(e,t){var n;const a=null!==(n=u[e])&&void 0!==n?n:[];for(const r of a)if(r.targetLuminance===(null===t||void 0===t?void 0:t.targetLuminance)&&r.variant===(null===t||void 0===t?void 0:t.variant))return r.result;const o="dark"===(null===t||void 0===t?void 0:t.variant)?l.saturation:c.saturation,i=`hsl(${e}, ${100*o}%, ${100*function(e,t,n,a){if("contrasts-light"===a)for(;m(t,n,e)>s.maxLuminance;)e-=.02;else if("contrasts-dark"===a)for(;m(t,n,e)<r.minLuminance;)e+=.02;return e}("dark"===(null===t||void 0===t?void 0:t.variant)?l.defaultLightness:c.defaultLightness,e,o,null===t||void 0===t?void 0:t.targetLuminance)}%)`;return a.push({variant:null===t||void 0===t?void 0:t.variant,targetLuminance:null===t||void 0===t?void 0:t.targetLuminance,result:i}),i}function v(e,t){return Math.abs((e-t+.5)%1-.5)}function m(e,t,n){const{r:a,g:o,b:i}=function(e,t,n){const a=(1-Math.abs(2*n-1))*t,o=a*(1-Math.abs(e/60%2-1)),i=n-a/2;let r=0,s=0,l=0;e<60?(r=a,s=o,l=0):e<120?(r=o,s=a,l=0):e<180?(r=0,s=a,l=o):e<240?(r=0,s=o,l=a):e<300?(r=o,s=0,l=a):(r=a,s=0,l=o);return{r:Math.round(255*(r+i)),g:Math.round(255*(s+i)),b:Math.round(255*(l+i))}}(e,t,n);return.2126*h(a/255)+.7152*h(o/255)+.0722*h(i/255)}function h(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}const f=function(){let{theme:e,unit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{areaChart:{margin:{top:15,right:32,bottom:5}},area:{isAnimationActive:!1,stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40},responsiveContainer:{width:"100%",height:220},grid:{stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40,strokeDasharray:"1 1"},xAxis:{tickLine:!1,tickMargin:10,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},yAxis:{tickLine:!1,tickMargin:10,tickSize:0,tickCount:5,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},tooltip:{animationDuration:150,animationEasing:"linear",offset:24}}},g="VersionTooltip_frame__mZVBJ",p="VersionTooltip_date__ejKCx",x="VersionTooltip_versionsList__tB7yN",k="VersionTooltip_versionsListItem__HAZpv",L="VersionTooltip_versionColorIndicator__ct25V",_="VersionTooltip_versionLabel__eA66Q",j="VersionTooltip_versionCount__0B822";var C=n(9127),b=n(3153),y=n(239),T=n(184);const N=e=>{let{label:t,payload:n,unit:a,versionHues:o,theme:i}=e;const r=[...null!==n&&void 0!==n?n:[]];return r.reverse(),(0,T.jsx)(C.N.Consumer,{children:e=>{var n,s,l;i=null!==(n=i)&&void 0!==n?n:e;const c=r.length>0&&(0,T.jsxs)("ul",{className:x,children:[r.map(((e,t)=>{const n=i?d(o[e.name],i.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):e.color,r=function(e,t,n){const{versionCounts:a}=t.payload,o=e/Object.values(a).reduce(((e,t)=>e+t),0)*100;return"percentage"===n?Math.round(100*o)/100+"%":`${e.toLocaleString()} (${Math.round(o)}%)`}(e.value,e,a);return(0,T.jsxs)("li",{className:k,children:[(0,T.jsx)("div",{className:L,style:{backgroundColor:n}}),(0,T.jsx)(b.x,{variant:"small",className:_,children:e.name}),(0,T.jsx)(b.x,{variant:"small",className:j,children:r})]},t)})),(0,T.jsxs)("li",{className:k,children:[(0,T.jsx)(b.x,{variant:"small",className:_,children:"Total"}),(0,T.jsx)(b.x,{variant:"small",className:j,children:r.reduce(((e,t)=>e+(t.value||0)),0).toLocaleString()})]},"sum")]});return(0,T.jsxs)(y.f,{theme:i,className:g,style:{backgroundColor:null===(s=null!==(l=i)&&void 0!==l?l:e)||void 0===s?void 0:s.semanticColors.bodyBackground},children:[(0,T.jsx)(b.x,{className:p,variant:"medium",children:(u=t,new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),c]});var u}})};var M=n(9913),w=n(5163),S=n(466),V=n(2891),H=n(5667),I=n(4296),D=n(2955),A=n(2839),$=n(4164);const B="VersionLegend_versionsListContainer__vCxx0",O="VersionLegend_versionsList__tRQMP",K="VersionLegend_versionsListItem__f1GBC",F="VersionLegend_versionColorIndicator__BpNMr",E="VersionLegend_versionLabel__FNwLX",P=e=>{let{payload:t,versionHues:n}=e;return(0,T.jsx)(C.N.Consumer,{children:e=>(0,T.jsx)("div",{className:B,children:(0,T.jsx)("ul",{className:O,children:t.map((t=>{const a=e?d(n[t.value],e.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):t.color;return(0,T.jsxs)("li",{className:K,children:[(0,T.jsx)("div",{className:F,style:{backgroundColor:a}}),(0,T.jsx)(b.x,{variant:"small",className:E,children:t.value})]},t.value)}))})})})};function Q(e){return e?e>=1e6?`${(e/1e6).toLocaleString()} m`:e>=1e3?`${(e/1e3).toLocaleString()} k`:e.toLocaleString():""}function U(e,t){const n=new Date(e);return n.setHours(0,0,0,0),n.getTime()+t}const Z=e=>{let{className:t,history:n,maxDaysShown:o,maxVersionsShown:r,maxTicks:s,showLegend:l,showTooltip:c,unit:u,versionLabeler:m,theme:h,tooltipTheme:g}=e;const p=f({theme:h,unit:u}),[x,k]=(0,a.useState)(),L=a.useMemo((()=>function(e,t,n){if(!e||0===e.points.length)return e;const a=e.points[e.points.length-1].date,o=new Date(a).setHours(0,0,0,0)-24*n*60*60*1e3,i={};for(const c of e.points)if(c.date>=o)for(const[e,t]of Object.entries(c.versionCounts)){var r;const n=null!==(r=i[e])&&void 0!==r?r:0;i[e]=n+t}const s=new Set(Object.entries(i).sort(((e,t)=>e[1]-t[1])).slice(-t).map((e=>{let[t,n]=e;return t}))),l=[];for(const c of e.points)if(c.date>=o){const e=Object.keys(c.versionCounts).filter((e=>s.has(e)));if(e.length>0){const t={date:c.date,versionCounts:{}};for(const n of e)t.versionCounts[n]=c.versionCounts[n];l.push(t)}}return{versions:e.versions.filter((e=>s.has(e))),points:l}}(n,null!==r&&void 0!==r?r:5,null!==o&&void 0!==o?o:30)),[n,o,r]),_=a.useMemo((()=>L?function(e,t){if(0===t)return[];const n=e[0],a=e[e.length-1];if(1===t)return[n];if(2===t)return[n,a];const o=a-n,i=t-1;let r=6048e5;for(;Math.floor(o/r)>i;)r*=2;const s=new Set([n]);let l=U(n,r);for(const c of e)c>=l&&(s.add(c),l=U(c,r));return[...s]}(L.points.map((e=>e.date)),null!==s&&void 0!==s?s:6):[]),[L,s]),j=a.useMemo((()=>{if(!L)return{};const e={};let t;return L.versions.forEach((n=>{const{hue:a,avoidToken:o}=function(e,t){var n;const a=i().create(e);let o,r=100;do{o=a.random(),o+=.618033988749895,o%=1}while(t&&--r>0&&(v(o,t.adjacentHue)<.4||t.allHues.find((e=>v(o,e)<.06))));return{hue:360*o,avoidToken:{adjacentHue:o,allHues:[...null!==(n=null===t||void 0===t?void 0:t.allHues)&&void 0!==n?n:[],o]}}}(n,t);t=o,e[m?m(n):n]=a})),e}),[L,m]),C=a.useMemo((()=>L?L.versions.map((e=>{const t=m?m(e):e,n=j[t];return{name:t,hue:n,fill:d(n,{variant:null!==h&&void 0!==h&&h.isInverted?"dark":"light",targetLuminance:null!==h&&void 0!==h&&h.isInverted?"contrasts-light":"contrasts-dark"}),dataKey:e}})).reverse():[]),[L,null===h||void 0===h?void 0:h.isInverted,j,m]);return(0,T.jsxs)("div",{className:t,children:[(0,T.jsx)(M.h,{...p.responsiveContainer,children:(0,T.jsxs)(w.T,{...p.areaChart,data:null===L||void 0===L?void 0:L.points,reverseStackOrder:!0,stackOffset:"percentage"===u?"expand":"none",children:[(0,T.jsx)(S.K,{...p.xAxis,dataKey:"date",type:"number",scale:"time",domain:["dataMin","dataMax"],tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),interval:0,ticks:_}),(0,T.jsx)(V.B,{...p.yAxis,type:"number",..."percentage"===u?{domain:[0,1],tickFormatter:e=>`${Math.round(100*e)}%`}:{domain:["auto","auto"],tickFormatter:Q}}),!1!==c&&(0,T.jsx)(H.u,{...p.tooltip,content:(b={versionHues:j,unit:u,theme:g},e=>(0,T.jsx)(N,{...b,...e}))}),!1!==l&&x&&(0,T.jsx)(I.D,{height:0,content:e=>{let{payload:t}=e;return(0,$.createPortal)(t&&(0,T.jsx)(P,{payload:t,versionHues:j}),x)}}),C.map((e=>{let{name:t,fill:n,dataKey:o}=e;return(0,a.createElement)(D.u,{...p.area,name:t,key:t,dataKey:e=>e.versionCounts[o],stackId:"1",fill:n,fillOpacity:1})})),(0,T.jsx)(A.q,{...p.grid})]})}),(0,T.jsx)("div",{ref:e=>k(null!==e&&void 0!==e?e:void 0)})]});var b}}}]);
//# sourceMappingURL=VersionDownloadChart.b4a01dc6.chunk.js.map